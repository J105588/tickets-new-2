/* reservation.css - Premium Redesign */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
    --primary-color: #6366f1;
    --primary-hover: #4f46e5;
    --success-color: #10b981;
    --danger-color: #ef4444;
    --text-main: #1f2937;
    --text-muted: #6b7280;
    --glass-bg: rgba(255, 255, 255, 0.92);
    --glass-border: rgba(255, 255, 255, 0.5);
    --radius-lg: 16px;
    --radius-md: 8px;
    --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

body {
    margin: 0;
    min-height: 100vh;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--text-main);
    /* Aurora Gradient Background */
    background-color: #667eea;
    background-image:
        radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
        radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
        radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%),
        linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background-attachment: fixed;
    background-size: cover;
    padding: 20px;
}

/* Glassmorphism Container */
.reservation-container {
    max-width: 800px;
    margin: 2rem auto;
    padding: 2.5rem;
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
}

/* Header */
.app-header {
    text-align: center;
    color: white;
    margin-bottom: 2rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.logo {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.025em;
}

/* Progress Bar */
.progress-bar {
    display: flex;
    justify-content: space-between;
    margin-bottom: 3rem;
    position: relative;
}

.progress-bar::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: #e5e7eb;
    z-index: 0;
}

.step {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-muted);
    padding-bottom: 1rem;
    position: relative;
    z-index: 1;
    transition: all 0.3s ease;
}

.step.active {
    color: var(--primary-color);
}

.step.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    /* Overlap base line */
    left: 0;
    width: 100%;
    height: 4px;
    background: var(--primary-color);
    border-radius: 2px;
}

/* Typography & Headings */
h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: #111827;
}

p {
    line-height: 1.6;
    color: #4b5563;
}

/* Forms */
.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: #374151;
}

.form-control {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid #d1d5db;
    border-radius: var(--radius-md);
    font-size: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
    background-color: #f9fafb;
    box-sizing: border-box;
    /* Fix width overflow */
}

.form-control:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    background-color: white;
}

.required {
    color: var(--danger-color);
    margin-left: 2px;
}

/* Seat Map Container */
.seat-map-container {
    /* max-height/min-height handled by modal specific rules or default */
    overflow: auto;
    border: 1px solid #e5e7eb;
    margin-bottom: 1.5rem;
    position: relative;
    background: #ffffff;
    border-radius: var(--radius-md);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    -webkit-overflow-scrolling: touch;
    padding: 20px;
    display: block;
    /* Use block to allow scrolling to left edge */
    /* Remove automatic flex centering which hides overflow */

    /* Zoom Variables */
    --seat-scale: 1.0;
    --seat-size: calc(44px * var(--seat-scale));
    --seat-margin: calc(4px * var(--seat-scale));
    --font-size: calc(12px * var(--seat-scale));
}

/* 
   Seat Styling 
*/
.seat-section {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.seat-row {
    white-space: nowrap;
    margin-bottom: 10px;
    display: flex;
    justify-content: center;
}

.seat {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: var(--seat-size);
    height: var(--seat-size);
    margin: var(--seat-margin);
    font-size: var(--font-size);
    font-weight: 600;
    border-radius: calc(8px * var(--seat-scale));
    cursor: pointer;
    user-select: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* Available */
.seat.available {
    background-color: #ffffff;
    border: 1px solid #d1d5db;
    color: #374151;
}

.seat.available:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.seat.available:active {
    transform: translateY(0);
}

/* Selected */
.seat.selected {
    background-color: var(--success-color);
    border: 1px solid var(--success-color);
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    transform: scale(1.05);
}

/* 
   Unavailable (Unified Gray)
   Covers: reserved, checked-in, unavailable, walkin, etc.
*/
.seat:not(.available):not(.selected) {
    background-color: #e5e7eb;
    /* Cool gray 200 */
    color: transparent;
    /* Hide text for unavailable seats? Or keep it? User said "gray". Usually cleaner without text or faint text. Let's keep transparent as implied by 'gray block' look, or faint gray text. Let's start with transparent for a clean look, or #9ca3af if ID needed. Let's use transparent as often preferred for 'dead' seats. Wait, user might want to see ID? Let's hide text to make them recede. */
    color: #9ca3af;
    /* Faint text just in case */
    border: 1px solid #e5e7eb;
    cursor: not-allowed;
    pointer-events: none;
}

/* Passages */
.passage-vertical {
    width: 30px;
    flex-shrink: 0;
}

.passage-horizontal {
    height: 30px;
    width: 100%;
}


/* Legend */
.seat-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
    justify-content: center;
    padding: 10px;
    background: #f3f4f6;
    border-radius: var(--radius-md);
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    color: #4b5563;
}

.legend-item .seat {
    width: 24px;
    height: 24px;
    margin: 0;
    font-size: 0;
    /* Hide text in legend icons */
    cursor: default;
    pointer-events: none;
}

/* Buttons */
.btn {
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    transition: all 0.2s;
    letter-spacing: 0.025em;
}

.btn-primary {
    background: var(--primary-color);
    color: white;
    box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2);
}

.btn-primary:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
    box-shadow: 0 6px 8px rgba(79, 70, 229, 0.25);
}

.btn-primary:disabled {
    background: #9ca3af;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.btn-secondary {
    background: white;
    color: var(--text-main);
    border: 1px solid #d1d5db;
}

.btn-secondary:hover {
    background: #f9fafb;
    border-color: #9ca3af;
}

.btn-success {
    background: var(--success-color);
    color: white;
    width: 100%;
    padding: 16px;
    font-size: 1.1rem;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
}

.btn-success:hover {
    background: #059669;
    /* Darker emerald */
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.3);
}

/* Utility Info Boxes */
.selected-seats-info {
    font-weight: 600;
    margin-bottom: 1.5rem;
    padding: 16px;
    background: #eff6ff;
    /* Light blue */
    border: 1px solid #bfdbfe;
    border-radius: var(--radius-md);
    color: #1e40af;
    text-align: center;
}

.confirmation-box {
    background: #f8fafc;
    padding: 20px;
    border-radius: var(--radius-md);
    border: 1px solid #e2e8f0;
    margin-bottom: 2rem;
}

.confirmation-box h4 {
    margin-top: 0;
    color: var(--text-main);
    border-bottom: 2px solid #e2e8f0;
    padding-bottom: 10px;
    margin-bottom: 15px;
}

/* Animation */
.step-content {
    display: none;
    animation: slideUpFade 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.step-content.active {
    display: block;
}

@keyframes slideUpFade {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Spinner */
.spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid var(--primary-color);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 20px auto;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* Mobile Optimizations */
@media (max-width: 600px) {
    .reservation-container {
        padding: 1.5rem;
        margin: 1rem;
        width: auto;
    }

    .step {
        font-size: 0.8rem;
    }

    .seat {
        width: 38px;
        height: 38px;
        margin: 2px;
    }

    h2 {
        font-size: 1.25rem;
    }

    .btn {
        width: 100%;
        margin-bottom: 10px;
    }

    .header-with-action {
        flex-direction: column;
        gap: 10px;
        align-items: flex-start;
    }

    .header-with-action .btn {
        width: auto;
        align-self: flex-start;
    }
}

/* ============================
   Seat Selection Modal 
   ============================ */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(4px);
    animation: fadeIn 0.2s;
}

.modal-overlay.active {
    display: flex;
}

.modal-container {
    background: white;
    width: 95%;
    max-width: 1000px;
    height: 90vh;
    border-radius: var(--radius-lg);
    display: flex;
    flex-direction: column;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    overflow: hidden;
    animation: scaleUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.modal-header {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f9fafb;
}

.modal-header h3 {
    margin: 0;
    font-size: 1.25rem;
    color: var(--text-main);
}

.btn-icon {
    background: transparent;
    border: none;
    font-size: 1.25rem;
    cursor: pointer;
    color: var(--text-muted);
    padding: 8px;
    border-radius: 50%;
    transition: background 0.2s;
}

.btn-icon:hover {
    background: #e5e7eb;
    color: var(--danger-color);
}

.modal-body {
    flex: 1;
    position: relative;
    overflow: hidden;
    /* Contains the scrollable wrapper */
    background: #f3f4f6;
    display: flex;
    flex-direction: column;
}

/* Modal specific Seat Map adjustments */
.modal-body .seat-legend {
    background: white;
    border-bottom: 1px solid #e5e7eb;
    margin: 0;
    border-radius: 0;
    z-index: 10;
    position: relative;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

#seat-map-wrapper {
    flex: 1;
    overflow: hidden;
    /* Wrapper shouldn't scroll, the inner container should */
    position: relative;
    padding: 0;
    /* Removed flex centering that causes clipping */
}

/* Reset original container styles for modal usage */
.seat-map-container {
    height: 100%;
    /* Fill the wrapper */
    width: 100%;
    overflow: auto;
    /* Handle scrolling here */
    border: none;
    box-shadow: none;
    background: transparent;
    padding: 20px;
    /* Keep padding for inner spacing */
    margin: 0;
    /* transform removed, handled by variables */
    display: block;
}

/* Zoom Controls */
.zoom-controls {
    position: absolute;
    bottom: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    z-index: 20;
}

.btn-zoom {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: white;
    border: 1px solid #d1d5db;
    color: var(--text-main);
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.btn-zoom:hover {
    background: #f9fafb;
    transform: translateY(-1px);
    color: var(--primary-color);
}

/* Footer */
.modal-footer {
    padding: 1rem 1.5rem;
    border-top: 1px solid #e5e7eb;
    background: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-selection-info {
    font-weight: 600;
    color: var(--text-main);
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes scaleUp {
    from {
        transform: scale(0.95);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* Mobile adjust for modal */
@media (max-width: 600px) {
    .modal-container {
        width: 100%;
        height: 100%;
        border-radius: 0;
    }

    .zoom-controls {
        bottom: 80px;
        /* Above footer */
    }
}